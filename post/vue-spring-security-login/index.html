<!DOCTYPE html>
<html lang="en-us">
<head><head>
    <meta name="referrer" content="no-referrer"/>
    <meta name="google-site-verification" content="9vIieCe-Qpd78QOmBl63rGtIVbhY6sYyuxX3j8XWBA4" />
    <meta name="baidu-site-verification" content="LRrmH41lz7" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="在前后端分离的状态下，传统的spring security认证模式也需要做一点改造，以适应ajax的前端访问模式">
    
    <meta name="keyword"  content="暴走的初号机, shinji3887, 暴走的初号机的网络日志, 暴走的初号机的博客, shinji3887 Blog, 博客, 个人网站, 互联网, Web, 云原生, PaaS, Istio, Kubernetes, 微服务, Microservice">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>使用vue集成spring security进行安全登陆-同步率400%</title>

    <link rel="canonical" href="/post/vue-spring-security-login/">

    <link rel="stylesheet" href="https://lupeier.cn-sh2.ufileos.com/iDisqus.min.css"/>
	
    
    <link rel="stylesheet" href="https://lupeier.cn-sh2.ufileos.com/bootstrap.min.css">

    
    <link rel="stylesheet" href="https://lupeier.cn-sh2.ufileos.com/hux-blog.min.css">

    
    <link rel="stylesheet" href="https://lupeier.cn-sh2.ufileos.com/syntax.css">

    
    <link rel="stylesheet" href="https://lupeier.cn-sh2.ufileos.com/zanshang.css">

    
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    
    
    <script src="https://lupeier.cn-sh2.ufileos.com/jquery.min.js"></script>
    
    
    <script src="https://lupeier.cn-sh2.ufileos.com/bootstrap.min.js"></script>
    
    
    <script src="https://lupeier.cn-sh2.ufileos.com/hux-blog.min.js"></script>
</head>
</head>

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">L&#39; HandBook</a>
        </div>

        
        
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    <li>
                        <a href="categories/tech">Tech</a>
                    </li>
                    
                    <li>
                        <a href="categories/tips">Tips</a>
                    </li>
                    
                    <li>
                        <a href="/about">About</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        
    </div>
    
</nav>
<script>
    
    
    
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        
            $navbar.className = " ";
            
            setTimeout(function(){
                
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>




<style type="text/css">
    header.intro-header{
        background-image: url('https://lupeier.cn-sh2.ufileos.com/hand-keyboard-secured-34203.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                       
                       <a class="tag" href="/tags/spring-cloud" title="Spring Cloud">
                           Spring Cloud
                        </a>
                        
                       <a class="tag" href="/tags/vue" title="vue">
                           vue
                        </a>
                        
                    </div>
                    <h1>使用vue集成spring security进行安全登陆</h1>
                    <h2 class="subheading"></h2>
                    <span  class="meta">Posted by L&#39; on Friday, May 17, 2019
                        
                    </span>
					<br>
                </div>
            </div>
        </div>
    </div>
</header>




<article>
    <div class="container">
        <div class="row">

            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

        		
                        <header>
                        <h2>TOC</h2>
                        </header>
                        <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#核心配置类">核心配置类</a></li>
<li><a href="#axios相关配置">axios相关配置</a></li>
<li><a href="#验证码处理">验证码处理</a>
<ul>
<li><a href="#webauthenticationdetails">WebAuthenticationDetails</a></li>
<li><a href="#authenticationdetailssource">AuthenticationDetailsSource</a></li>
<li><a href="#authenticationprovider">AuthenticationProvider</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
        		
        		

<blockquote>
<p>在前后端分离的状态下，传统的spring security认证模式也需要做一点改造，以适应ajax的前端访问模式</p>
</blockquote>

<p>现在前后端分离的开发模式已经成为主流，好处不多说了，说说碰到的问题和坑。首先要解决的肯定是跨域问题，这个问题之前已经有讨论，请移步<a href="https://www.jianshu.com/p/8f5e7b547dfc">这里查看</a>。另外一个问题是传统的spring security安全机制是基于页面跳转的，使用302重定向（认证成功跳转至之前访问的页面，认证失败或未认证跳转至系统设置的默认登陆页面）。传统应用这么弄没问题，但现在vue一般都是基于axios进行ajax访问，ajax请求是没法直接处理302跳转的（浏览器会直接处理跳转请求，ajax的callback拿到的是跳转后的返回页面，在spring security中就是登陆首页，不符合需求）。幸好spring security所有的流程都是可以自定义的，我们可以扩展一下各个环节的流程。spring boot版本为2.1.4.RELEASE，对应的spring security版本为5.1.5.RELEASE</p>

<h3 id="核心配置类">核心配置类</h3>

<p><code>WebSecurityConfig</code>类配置如下</p>

<pre><code class="language-java">import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.HttpStatus;
import org.springframework.security.authentication.AuthenticationDetailsSource;
import org.springframework.security.authentication.AuthenticationProvider;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.web.AuthenticationEntryPoint;
import org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler;
import org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler;
import org.springframework.security.web.authentication.WebAuthenticationDetails;
import org.springframework.security.web.authentication.logout.SimpleUrlLogoutSuccessHandler;

import com.bocsh.mer.security.MyUserDetailsService;

@Configuration
@EnableWebSecurity
public class WebSecurityConfig extends WebSecurityConfigurerAdapter {
	
	@Autowired
	MyUserDetailsService myDetailService;
	
	@Autowired
    private AuthenticationDetailsSource&lt;HttpServletRequest, WebAuthenticationDetails&gt; authenticationDetailsSource;
	
	protected Log log = LogFactory.getLog(this.getClass());
	
	@Autowired
    private AuthenticationProvider authenticationProvider; 

	@Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
		
        auth.authenticationProvider(authenticationProvider);
    }
	
	//定义登陆成功返回信息
	private class AjaxAuthSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {
	    @Override
	    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {
	    	
	    	//User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
	    	log.info(&quot;商户[&quot; + SecurityContextHolder.getContext().getAuthentication().getPrincipal() +&quot;]登陆成功！&quot;);
	    	//登陆成功后移除session中验证码信息
	    	request.getSession().removeAttribute(&quot;codeValue&quot;);
	    	request.getSession().removeAttribute(&quot;codeTime&quot;);
	    	
	    	response.setContentType(&quot;application/json;charset=utf-8&quot;);
            PrintWriter out = response.getWriter();
            out.write(&quot;{\&quot;status\&quot;:\&quot;ok\&quot;,\&quot;msg\&quot;:\&quot;登录成功\&quot;}&quot;);
            out.flush();
            out.close();
	    }
	}
	
	//定义登陆失败返回信息
	private class AjaxAuthFailHandler extends SimpleUrlAuthenticationFailureHandler {
	    @Override
	    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException {
	    	//登陆失败后移除session中验证码信息
	    	request.getSession().removeAttribute(&quot;codeValue&quot;);
	    	request.getSession().removeAttribute(&quot;codeTime&quot;);
	    	
	    	response.setContentType(&quot;application/json;charset=utf-8&quot;);
	    	response.setStatus(HttpStatus.UNAUTHORIZED.value());
            PrintWriter out = response.getWriter();
            out.write(&quot;{\&quot;status\&quot;:\&quot;error\&quot;,\&quot;msg\&quot;:\&quot;请检查用户名、密码或验证码是否正确\&quot;}&quot;);
            out.flush();
            out.close();
	    }
	}
	
	//定义异常返回信息
	public class UnauthorizedEntryPoint implements AuthenticationEntryPoint {
	    @Override
	    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {
	    	response.sendError(HttpStatus.UNAUTHORIZED.value(),authException.getMessage());
        }

	}
	
	//定义登出成功返回信息
	private class AjaxLogoutSuccessHandler extends SimpleUrlLogoutSuccessHandler  {

		public void onLogoutSuccess(HttpServletRequest request, HttpServletResponse response,
				Authentication authentication) throws IOException, ServletException {
			response.setContentType(&quot;application/json;charset=utf-8&quot;);
            PrintWriter out = response.getWriter();
            out.write(&quot;{\&quot;status\&quot;:\&quot;ok\&quot;,\&quot;msg\&quot;:\&quot;登出成功\&quot;}&quot;);
            out.flush();
            out.close();
		}
	}
	
	@Override
    protected void configure(HttpSecurity http) throws Exception {
		http
		.exceptionHandling().authenticationEntryPoint(new UnauthorizedEntryPoint())
		.and()
		.csrf().disable()
		.authorizeRequests()                   
            .antMatchers(&quot;/users/login_page&quot;,&quot;/users/captcha&quot;).permitAll()
            .anyRequest().authenticated()
            .and().formLogin().loginPage(&quot;/users/login_page&quot;)
                              .successHandler(new AjaxAuthSuccessHandler())
                              .failureHandler(new AjaxAuthFailHandler())
                              .loginProcessingUrl(&quot;/login&quot;)
                              .authenticationDetailsSource(authenticationDetailsSource)
            .and()
            .logout().logoutSuccessHandler(new AjaxLogoutSuccessHandler())
            .logoutUrl(&quot;/logout&quot;);
    }
}
</code></pre>

<p>这里分别说明：<code>configure</code>方法配置整体的认证规则，即除了<code>/users/login_page</code>和<code>/users/captcha</code>这两个方式之外全部需要认证，同时在<code>formLogin</code>方法中设置了两个自定义的handler分别处理认证成功、认证失败的情况，这里我们设置直接返回json字符串，content-type设置为<code>application/json;charset=utf-8</code>，这样在认证完毕之后就不用自动302跳转了，而是交由axios框架来进行处理。</p>

<p><code>UnauthorizedEntryPoint</code>定义了异常处理的逻辑，同理我们也是直接返回ajax信息而不做跳转。</p>

<h3 id="axios相关配置">axios相关配置</h3>

<pre><code class="language-js">instance.interceptors.response.use(res =&gt; {
      let { data } = res
      this.destroy(url)
      if (this.shade) {
        Spin.hide()
        Modal.success({
          title: '操作成功'
        })
      }
      console.log(res)
      return data
    }, error =&gt; {
      console.log(error)
      var code = error.response.status
      if (code === 401) {
        Cookies.remove(TOKEN_KEY)
        window.location.href = '/login'
        Message.error('未登录，或登录失效，请登录')
      }
</code></pre>

<p>这里面我们定义了一个响应拦截器，在error情况下，判断若返回码为401（就是我们在spring security中自定义的handler的错误状态码），则自动跳转至登陆页面。这样实现了在会话失效的情况下，点击前端任意需要访问后端api的按钮，均会触发跳转登录首页的效果，符合我们的预期。实际情况中一般前端框架都会自己带一套基于cookies的认证机制，这里我们把cookies的失效时间可以设置的长一点（一般可以设为一天），以保障还是以后端会话的失效时间为准。</p>

<h3 id="验证码处理">验证码处理</h3>

<p>一般我们在处理用户登录，为安全考虑需要加入图形验证码。这里需要注意的一点是<strong>验证码也必须作为login这个action的处理参数传入</strong>，否则的话这个验证码只是做了前端页面验证，实际在处理login事件的时候是没有验证码的，这样就没有意义了。而spring security框架默认只能帮助我们处理用户名+密码的这样验证方式，这样就需要对认证方式进行扩展。</p>

<h4 id="webauthenticationdetails">WebAuthenticationDetails</h4>

<pre><code class="language-java">import javax.servlet.http.HttpServletRequest;

import org.springframework.security.web.authentication.WebAuthenticationDetails;

public class MyWebAuthenticationDetails extends WebAuthenticationDetails {
    /**
     * 
     */
    private static final long serialVersionUID = 6975601077710753878L;
    
    private String username;
    
    private String password;
    
    private String validcode;
    
    private String sessionCodeValue;
    
    private long sessionCodeTime;
    
    public String getSessionCodeValue() {
		return sessionCodeValue;
	}

	public void setSessionCodeValue(String sessionCodeValue) {
		this.sessionCodeValue = sessionCodeValue;
	}

    public long getSessionCodeTime() {
		return sessionCodeTime;
	}

	public void setSessionCodeTime(long sessionCodeTime) {
		this.sessionCodeTime = sessionCodeTime;
	}

	public String getUsername() {
		return username;
	}

	public void setUsername(String username) {
		this.username = username;
	}

	public String getPassword() {
		return password;
	}

	public void setPassword(String password) {
		this.password = password;
	}

	public String getValidcode() {
		return validcode;
	}

	public void setValidcode(String validcode) {
		this.validcode = validcode;
	}

	public MyWebAuthenticationDetails(HttpServletRequest request) {
        super(request);
        username = request.getParameter(&quot;username&quot;);
        password = request.getParameter(&quot;password&quot;);
        validcode = request.getParameter(&quot;validateCode&quot;);
        sessionCodeValue = (String)request.getSession().getAttribute(&quot;codeValue&quot;);
        sessionCodeTime = (Long)request.getSession().getAttribute(&quot;codeTime&quot;);
    }
}
</code></pre>

<p>这边前三个参数是从页面的login请求中传过来的，后面两个参数是在页面上请求生成图片验证码的时候我们设置到session里面去，以便于后续的验证</p>

<h4 id="authenticationdetailssource">AuthenticationDetailsSource</h4>

<pre><code class="language-java">import javax.servlet.http.HttpServletRequest;

import org.springframework.security.authentication.AuthenticationDetailsSource;
import org.springframework.security.web.authentication.WebAuthenticationDetails;
import org.springframework.stereotype.Component;

@Component
public class MyAuthenticationDetailsSource implements AuthenticationDetailsSource&lt;HttpServletRequest, WebAuthenticationDetails&gt; {

    @Override
    public WebAuthenticationDetails buildDetails(HttpServletRequest context) {
        return new MyWebAuthenticationDetails(context);
    }
}
</code></pre>

<p>这个类实现了一个自定义的接口，返回我们刚才定义的<code>MyWebAuthenticationDetails</code>资源</p>

<h4 id="authenticationprovider">AuthenticationProvider</h4>

<pre><code class="language-java">import java.util.ArrayList;
import java.util.Collection;
import java.util.Date;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.authentication.AuthenticationProvider;
import org.springframework.security.authentication.BadCredentialsException;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.stereotype.Component;

import com.bocsh.mer.service.MerchantService;

@Component
public class MyAuthenticationProvider implements AuthenticationProvider {
    
	protected Log log = LogFactory.getLog(this.getClass());
	
	@Autowired
	MerchantService ms;
	
    @Override
    public Authentication authenticate(Authentication authentication) 
            throws AuthenticationException {
    	log.info(&quot;now start custom authenticate process!&quot;);
        MyWebAuthenticationDetails details = (MyWebAuthenticationDetails) authentication.getDetails();  
        
        //校验码判断
        if(!details.getValidcode().equals(details.getSessionCodeValue())) {
        	log.info(&quot;validate code error&quot;);
        	throw new BadCredentialsException(&quot;authenticate fail！&quot;);
        }

        //校验码有效期
        if((new Date()).getTime() - details.getSessionCodeTime() &gt; 60000) {
        	log.info(&quot;validate code expired!&quot;);
        	throw new BadCredentialsException(&quot;authenticate fail！&quot;);
        }
        
        //验密
        String inpass=&quot;&quot;;
		try {
			inpass = ms.getPass(details.getUsername());
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
        if(!inpass.equals(details.getPassword())) {
        	log.info(&quot;password error&quot;);
        	throw new BadCredentialsException(&quot;authenticate fail！&quot;);
        }
        	
        
        Collection&lt;GrantedAuthority&gt; auths=new ArrayList&lt;GrantedAuthority&gt;(); 
        auths.add(new SimpleGrantedAuthority(&quot;ROLE_ADMIN&quot;));
        return new UsernamePasswordAuthenticationToken(details.getUsername(),details.getPassword(),auths);
   
    }

    @Override
    public boolean supports(Class&lt;?&gt; authentication) {
        return authentication.equals(UsernamePasswordAuthenticationToken.class);
    }

}
</code></pre>

<p>这里自定义了一个<code>AuthenticationProvider</code>来处理实际的认证业务逻辑，在这里可以方便的根据我们需要来进行自定义，我这边分别做了验证码校验、效期校验和验密，大家可以根据需要定制。认证成功就返回一个<code>UsernamePasswordAuthenticationToken</code>对象并配置好合适的权限（权限基于标准的RBAC模型，我这里为了讲解方便设置为ROLE_ADMIN，这里不展开讲了）。如果认证失败，只需要抛出一个异常（AuthenticationException的子类），这样spring security会自动找到失败页面进行返回，对应我们上面定义的<code>AjaxAuthFailHandler</code>这个类。</p>

        
                
        
              <hr>
              <ul class="pager">
                  
                  <li class="previous">
                      <a href="/post/get-images-from-gcr-io/" data-toggle="tooltip" data-placement="top" title="通过阿里云快速获取gcr.io上的镜像文件">&larr; Previous Post</a>
                  </li>
                  
                  
                  <li class="next">
                      <a href="/post/vue-cli3.0-proxytable/" data-toggle="tooltip" data-placement="top" title="vue-cli3.0使用proxytable解决跨域问题">Next Post &rarr;</a>
                  </li>
                  
              </ul>
  
              


            </div>
            
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                     
                    
                        
                    
                        
                            <a href="/tags/cloud-native" title="Cloud Native">
                                Cloud Native
                            </a>
                        
                    
                        
                            <a href="/tags/devops" title="DevOps">
                                DevOps
                            </a>
                        
                    
                        
                            <a href="/tags/docker" title="Docker">
                                Docker
                            </a>
                        
                    
                        
                    
                        
                    
                        
                            <a href="/tags/kubernetes" title="Kubernetes">
                                Kubernetes
                            </a>
                        
                    
                        
                            <a href="/tags/microservice" title="Microservice">
                                Microservice
                            </a>
                        
                    
                        
                            <a href="/tags/restful" title="RESTful">
                                RESTful
                            </a>
                        
                    
                        
                    
                        
                            <a href="/tags/spring-cloud" title="Spring Cloud">
                                Spring Cloud
                            </a>
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            <a href="/tags/vue" title="vue">
                                vue
                            </a>
                        
                    
                        
                    
                    </div>
                </section>

                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">
                    
                        <li><a target="_blank" href="https://skyao.io/">小剑的博客</a></li>
                    
                        <li><a target="_blank" href="https://zhaohuabing.com/">huabing的博客</a></li>
                    
                        <li><a target="_blank" href="http://blog.didispace.com/">程序猿DD的博客</a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</article>




<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                   
                   <li>
                       <a href="" rel="alternate" type="application/rss+xml" title="L&#39; HandBook" >
                           <span class="fa-stack fa-lg">
                               <i class="fa fa-circle fa-stack-2x"></i>
                               <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                           </span>
                       </a>
                   </li>
                   
                    
                    <li>
                        <a href="mailto:18016380795@163.com">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    
                    
                    

                    

		    
                    
                    <li>
                        <a target="_blank" href="/link%20of%20wechat%20QR%20code%20image">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-wechat fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://github.com/shinji3887">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                    
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/lupeier">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
		    
                </ul>
		<p class="copyright text-muted">
                    Copyright &copy; L&#39; HandBook , 2019
                    <br>
                    <br>
                    <a href="http://icp.chinaz.com/info?q=lupeier.com" target="_blank">备案号：沪ICP备19022667号-1</a>                    
                </p>
            </div>
        </div>
    </div>
</footer>



<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>






<script>
    
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>


<script>
    async("/js/fastclick.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<script>
    (function(){
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https'){
       bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      }
      else{
      bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>







</body>
</html>
